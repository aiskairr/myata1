'use strict';var __assign=function(){__assign=Object.assign||function(d){for(var a,b=1,c=arguments.length;b<c;b++){a=arguments[b];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(d[e]=a[e])}return d};return __assign.apply(this,arguments)},thumbnailsSettings={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",alignThumbnails:"middle",thumbWidth:100,thumbHeight:"80px",thumbMargin:5,appendThumbnailsTo:".lpc-lg-components",toggleThumb:!1,enableThumbDrag:!0,enableThumbSwipe:!0,thumbnailSwipeThreshold:10,
loadYouTubeThumbnail:!0,youTubeThumbSize:1,thumbnailPluginStrings:{toggleThumbnails:"Toggle thumbnails"}},lGEvents={afterAppendSlide:"lgAfterAppendSlide",init:"lgInit",hasVideo:"lgHasVideo",containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",afterAppendSubHtml:"lgAfterAppendSubHtml",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",beforeSlide:"lgBeforeSlide",afterSlide:"lgAfterSlide",posterClick:"lgPosterClick",dragStart:"lgDragStart",dragMove:"lgDragMove",
dragEnd:"lgDragEnd",beforeNextSlide:"lgBeforeNextSlide",beforePrevSlide:"lgBeforePrevSlide",beforeClose:"lgBeforeClose",afterClose:"lgAfterClose",rotateLeft:"lgRotateLeft",rotateRight:"lgRotateRight",flipHorizontal:"lgFlipHorizontal",flipVertical:"lgFlipVertical",autoplay:"lgAutoplay",autoplayStart:"lgAutoplayStart",autoplayStop:"lgAutoplayStop"},Thumbnail=function(){function d(a,b){this.translateX=this.thumbTotalWidth=this.thumbOuterWidth=0;this.thumbClickable=!1;this.core=a;this.$LG=b;return this}
d.prototype.init=function(){this.settings=__assign(__assign({},thumbnailsSettings),this.core.settings);this.thumbOuterWidth=0;this.thumbTotalWidth=this.core.galleryItems.length*(this.settings.thumbWidth+this.settings.thumbMargin);this.translateX=0;this.setAnimateThumbStyles();this.core.settings.allowMediaOverlap||(this.settings.toggleThumb=!1);this.settings.thumbnail&&(this.build(),this.settings.animateThumb?(this.settings.enableThumbDrag&&this.enableThumbDrag(),this.settings.enableThumbSwipe&&this.enableThumbSwipe(),
this.thumbClickable=!1):this.thumbClickable=!0,this.toggleThumbBar(),this.thumbKeyPress())};d.prototype.build=function(){var a=this;this.setThumbMarkup();this.manageActiveClassOnSlideChange();this.$lgThumb.first().on("click.lg touchend.lg",function(b){var c=a.$LG(b.target);c.hasAttribute("data-lpc-lg-item-id")&&setTimeout(function(){if(a.thumbClickable&&!a.core.lgBusy){var e=parseInt(c.attr("data-lpc-lg-item-id"));a.core.slide(e,!1,!0,!1)}},50)});this.core.LGel.on(lGEvents.beforeSlide+".thumb",function(b){a.animateThumb(b.detail.index)});
this.core.LGel.on(lGEvents.beforeOpen+".thumb",function(){a.thumbOuterWidth=a.core.outer.get().offsetWidth});this.core.LGel.on(lGEvents.updateSlides+".thumb",function(){a.rebuildThumbnails()});this.core.LGel.on(lGEvents.containerResize+".thumb",function(){a.core.lgOpened&&setTimeout(function(){a.thumbOuterWidth=a.core.outer.get().offsetWidth;a.animateThumb(a.core.index);a.thumbOuterWidth=a.core.outer.get().offsetWidth},50)})};d.prototype.setThumbMarkup=function(){var a="lpc-lg-thumb-outer ";this.settings.alignThumbnails&&
(a+="lpc-lg-thumb-align-"+this.settings.alignThumbnails);a='<div class="'+a+'">\n        <div class="lpc-lg-thumb lpc-lg-group">\n        </div>\n        </div>';this.core.outer.addClass("lpc-lg-has-thumb");".lpc-lg-components"===this.settings.appendThumbnailsTo?this.core.$lgComponents.append(a):this.core.outer.append(a);this.$thumbOuter=this.core.outer.find(".lpc-lg-thumb-outer").first();this.$lgThumb=this.core.outer.find(".lpc-lg-thumb").first();this.settings.animateThumb&&this.core.outer.find(".lpc-lg-thumb").css("transition-duration",
this.core.settings.speed+"ms").css("width",this.thumbTotalWidth+"px").css("position","relative");this.setThumbItemHtml(this.core.galleryItems)};d.prototype.enableThumbDrag=function(){var a=this,b={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0},c=!1;this.$thumbOuter.addClass("lpc-lg-grab");this.core.outer.find(".lpc-lg-thumb").first().on("mousedown.lg.thumb",function(e){a.thumbTotalWidth>a.thumbOuterWidth&&(e.preventDefault(),b.cords.startX=
e.pageX,b.startTime=new Date,a.thumbClickable=!1,c=!0,a.core.outer.get().scrollLeft+=1,--a.core.outer.get().scrollLeft,a.$thumbOuter.removeClass("lpc-lg-grab").addClass("lpc-lg-grabbing"))});this.$LG(window).on("mousemove.lg.thumb.global"+this.core.lgId,function(e){a.core.lgOpened&&c&&(b.cords.endX=e.pageX,b=a.onThumbTouchMove(b))});this.$LG(window).on("mouseup.lg.thumb.global"+this.core.lgId,function(){a.core.lgOpened&&(b.isMoved?b=a.onThumbTouchEnd(b):a.thumbClickable=!0,c&&(c=!1,a.$thumbOuter.removeClass("lpc-lg-grabbing").addClass("lpc-lg-grab")))})};
d.prototype.enableThumbSwipe=function(){var a=this,b={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0};this.$lgThumb.on("touchstart.lg",function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b.cords.startX=c.targetTouches[0].pageX,a.thumbClickable=!1,b.startTime=new Date)});this.$lgThumb.on("touchmove.lg",function(c){a.thumbTotalWidth>a.thumbOuterWidth&&(c.preventDefault(),b.cords.endX=c.targetTouches[0].pageX,b=a.onThumbTouchMove(b))});
this.$lgThumb.on("touchend.lg",function(){b.isMoved?b=a.onThumbTouchEnd(b):a.thumbClickable=!0})};d.prototype.rebuildThumbnails=function(){var a=this;this.$thumbOuter.addClass("lpc-lg-rebuilding-thumbnails");setTimeout(function(){a.thumbTotalWidth=a.core.galleryItems.length*(a.settings.thumbWidth+a.settings.thumbMargin);a.$lgThumb.css("width",a.thumbTotalWidth+"px");a.$lgThumb.empty();a.setThumbItemHtml(a.core.galleryItems);a.animateThumb(a.core.index)},50);setTimeout(function(){a.$thumbOuter.removeClass("lpc-lg-rebuilding-thumbnails")},
200)};d.prototype.setTranslate=function(a){this.$lgThumb.css("transform","translate3d(-"+a+"px, 0px, 0px)")};d.prototype.getPossibleTransformX=function(a){a>this.thumbTotalWidth-this.thumbOuterWidth&&(a=this.thumbTotalWidth-this.thumbOuterWidth);0>a&&(a=0);return a};d.prototype.animateThumb=function(a){this.$lgThumb.css("transition-duration",this.core.settings.speed+"ms");if(this.settings.animateThumb){var b=0;switch(this.settings.currentPagerPosition){case "left":b=0;break;case "middle":b=this.thumbOuterWidth/
2-this.settings.thumbWidth/2;break;case "right":b=this.thumbOuterWidth-this.settings.thumbWidth}this.translateX=(this.settings.thumbWidth+this.settings.thumbMargin)*a-1-b;this.translateX>this.thumbTotalWidth-this.thumbOuterWidth&&(this.translateX=this.thumbTotalWidth-this.thumbOuterWidth);0>this.translateX&&(this.translateX=0);this.setTranslate(this.translateX)}};d.prototype.onThumbTouchMove=function(a){a.newTranslateX=this.translateX;a.isMoved=!0;a.touchMoveTime=(new Date).valueOf();a.newTranslateX-=
a.cords.endX-a.cords.startX;a.newTranslateX=this.getPossibleTransformX(a.newTranslateX);this.setTranslate(a.newTranslateX);this.$thumbOuter.addClass("lpc-lg-dragging");return a};d.prototype.onThumbTouchEnd=function(a){a.isMoved=!1;a.endTime=new Date;this.$thumbOuter.removeClass("lpc-lg-dragging");var b=a.cords.endX-a.cords.startX,c=Math.abs(b)/(a.endTime.valueOf()-a.startTime.valueOf());.15<c&&30>a.endTime.valueOf()-a.touchMoveTime?(c+=1,2<c&&(c+=1),c+=Math.abs(b)/this.thumbOuterWidth*c,this.$lgThumb.css("transition-duration",
Math.min(c-1,2)+"settings"),this.translateX=this.getPossibleTransformX(this.translateX-b*c),this.setTranslate(this.translateX)):this.translateX=a.newTranslateX;Math.abs(a.cords.endX-a.cords.startX)<this.settings.thumbnailSwipeThreshold&&(this.thumbClickable=!0);return a};d.prototype.getThumbHtml=function(a,b,c){var e=this.core.galleryItems[b].__slideVideoInfo||{};return'<div data-lpc-lg-item-id="'+b+'" class="lpc-lg-thumb-item '+(b===this.core.index?" active":"")+'"\n        style="width:'+this.settings.thumbWidth+
"px; height: "+this.settings.thumbHeight+";\n            margin-right: "+this.settings.thumbMargin+'px;">\n            <img '+(c?'alt="'+c+'"':"")+' data-lpc-lg-item-id="'+b+'" src="/g/spacer.gif" data-src="'+(e.youtube?this.settings.loadYouTubeThumbnail?"//img.youtube.com/vi/"+e.youtube[1]+"/"+this.settings.youTubeThumbSize+".jpg":a:a)+'" />\n        </div>'};d.prototype.getThumbItemHtml=function(a){for(var b="",c=0;c<a.length;c++)b+=this.getThumbHtml(a[c].src,c,a[c].alt);return b};d.prototype.setThumbItemHtml=
function(a){a=this.getThumbItemHtml(a);this.$lgThumb.html(a)};d.prototype.setAnimateThumbStyles=function(){this.settings.animateThumb&&this.core.outer.addClass("lpc-lg-animate-thumb")};d.prototype.manageActiveClassOnSlideChange=function(){var a=this;this.core.LGel.on(lGEvents.beforeSlide+".thumb",function(b){var c=a.core.outer.find(".lpc-lg-thumb-item");b=b.detail.index;c.removeClass("active");c.eq(b).addClass("active")})};d.prototype.toggleThumbBar=function(){var a=this;this.settings.toggleThumb&&
(this.core.outer.addClass("lpc-lg-can-toggle"),this.core.$toolbar.append('<button type="button" aria-label="'+this.settings.thumbnailPluginStrings.toggleThumbnails+'" class="lpc-lg-toggle-thumb lpc-lg-icon"></button>'),this.core.outer.find(".lpc-lg-toggle-thumb").first().on("click.lg",function(){a.core.outer.toggleClass("lpc-lg-components-open")}))};d.prototype.thumbKeyPress=function(){var a=this;this.$LG(window).on("keydown.lg.thumb.global"+this.core.lgId,function(b){a.core.lgOpened&&a.settings.toggleThumb&&
(38===b.keyCode?(b.preventDefault(),a.core.outer.addClass("lpc-lg-components-open")):40===b.keyCode&&(b.preventDefault(),a.core.outer.removeClass("lpc-lg-components-open")))})};d.prototype.destroy=function(){this.settings.thumbnail&&(this.$LG(window).off(".lg.thumb.global"+this.core.lgId),this.core.LGel.off(".lg.thumb"),this.core.LGel.off(".thumb"),this.$thumbOuter.remove(),this.core.outer.removeClass("lpc-lg-has-thumb"))};return d}();